在这个视频中，你将了解一种\N新的采样方法，它比我们迄今\N为止使用的DDPM高效10倍以上。 这种新方法叫做DDIM。 你的目标是想要更多\N的图片，并且快速得到它们。 但是到目前为止，采样速度\N很慢，因为涉及到很多时间步骤， 比如500个，有时甚至\N更多才能得到一个好的样本。 而且每个时间步骤都依赖于前一个。 它遵循一个马尔可夫链过程。 但幸运的是，有许多新的\N采样器来解决这个问题，因为\N这一直是扩散模型的一个长期问题。 你可以训练它们，它们可以创造出\N既多样又逼真的惊人美丽的图像， 但从它们那里\N得到结果的速度非常慢。 其中一种非常受欢迎的\N采样器叫做DDIM，即去噪扩散\N隐式模型，这只是论文的名字。 这篇论文是由Jiaming Song、\NChenlin Meng和我的博士联合\N导师Stefano Ermon共同完成的。 DDIM之所以更快，\N是因为它能跳过时间步长。 所以它不是从500步\N到499步再到498步，而是\N能跳过所有这些步骤。 它能跳过很多步骤，\N因为它打破了马尔可夫假设。 马尔可夫链只用于概率过程。 但DDIM实际上从这个\N采样过程中去除了所有的\N随机性，因此是确定性的。 它所做的，本质上就是\N预测最终输出的粗略草图。 然后用去噪过程对其进行细化。 那么让我们比较一下左边\N的DDPM，这是我们迄今为止\N一直在做的，和右边的DDIM。 是的，使用DDIM速度快很多。 在时间步19之后，你\N立即就能看到一个有形的结果。 我们还在继续使用DDPM。 我们还在继续。 而且这一直可以\N用DDPM达到500。 好的，这里是实验课。 很多设置看起来都一样。 我只是在这里运行这个单元格，\N重新设置单位，我们的超参数。 这是DDPM噪声计划。 稍后我们会用\N它来和DDIM进行比较。 现在我正在实例化模型。 这里是用DDIM进行快速采样的地方。 这是DDIM的功能。 可以查看论文了解细节，\N但这里实现了相应的缩放因子。 然后我们在这里\N加载训练好的模型。 很酷的是，我们可以\N直接加载训练好的模型，\N使用DDIM或DDPM。 这都没关系。 这只是训练后的采样过程。 这是使用DDIM的采样算法。 需要指出的是，这里涉及到一个步长。 我们没有逐个\N时间步骤地进行。 实际上我们在\N这里跳过了一些步骤。 这里的n是20。 所以这是500除以20。 我们将在这里运行。 然后我们可以进行采样。 这速度快了很多。 我几乎看不到那里。 现在正在合成GIF。 我们会加快合成GIF的视频速度。 好了！ 这就是它的样子。 它能够瞬间变成这些\N游戏角色，速度非常快。 现在用这种更快的\N采样方法，你并不总能\N得到和使用DDPM一样的质量。 但这些实际上看起来相当不错。 实际上，人们发现，用在\N这500步上训练的模型，例如， 如果你采样500步，\NDDPM的表现会更好。 但对于任何小于500步\N的数字，DDIM的表现会好得多。 现在这里是相同的，\N但带有上下文模型。 所以你可以加载那个上下文。 太棒了！ 这些只是随机的上下文。 但你们也可以自己设置。 它们是这样的。 那么现在你们可能\N会问速度如何对比？ 我们可以加载原始的\NDDPM函数和采样算法。 然后我们可以在这个\NNotebook中使用 timeit 进行比较。 我们将比较DDIM和DDPM。 好了 看看这个速度提升。 哇！ 试着在你们自己的Notebook\N中运行这些，看看结果如何。